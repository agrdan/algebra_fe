document.addEventListener("DOMContentLoaded",()=>{function e(){document.getElementById("loader").style.display="block",setTimeout(n,1e3)}function n(){document.getElementById("loader").style.display="none",i.classList.remove("hide"),i.classList.add("show")}const o=document.getElementById("books"),t=document.getElementById("error"),r=document.getElementById("dropdown-menu"),a=document.getElementById("total-price"),i=document.getElementById("main-screen");e(),r.addEventListener("change",()=>{s(r.value)});const s=e=>{fetch(`https://frodo.ess.hr/api/knjige-json.php?autor=${e}`).then(e=>e.json()).then(c).catch(l)},c=e=>{if(console.log(e),0==e.length)t.innerHTML='<div class="error">Books not found!<div>',clearBookContainer(),clearPriceContainer();else{clearBookContainer(),clearErrorContainer();var n=0,r=null;Array.from(e).forEach(e=>{o.innerHTML+=d(e),n+=parseFloat(e.cijena),null==r&&(r=e.autor)}),showTotalPrice(n,r)}},l=e=>{t.innerHTML=`<div class="error">${e.toString()}<div>`,clearPriceContainer()},d=e=>`\n        <div class="item">\n            <h3 class="align">${e.naslovKnjige}</h3>\n            <hr>\n            <p>Book year: ${e.godinaIzdanja}</p>\n            <p>Book price: ${e.cijena}</p>\n            <p>Author: ${e.autor}</p>\n        </div>\n        `;clearBookContainer=(()=>{o.innerHTML=""}),clearErrorContainer=(()=>{t.innerHTML=""}),showTotalPrice=((e,n)=>{a.innerHTML="",a.classList.remove("hide"),a.classList.add("show"),a.innerHTML=`<div>Total price for ${n} collection is: ${e}<div>`}),clearPriceContainer=(()=>{a.classList.remove("show"),a.classList.add("hide")})});